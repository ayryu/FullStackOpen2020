(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){e.exports=t(39)},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),u=t.n(o),c=t(4),l=t(15),i=t(3),m=function(e){var n=e.content,t=e.deletion;return r.a.createElement("p",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){t()}},"Delete Listing"))},s=function(e){return r.a.createElement("form",{onSubmit:e.submitFunction},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.name,onChange:e.nameChange}),r.a.createElement("br",null),"phone number: ",r.a.createElement("input",{value:e.number,onChange:e.numberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},f=t(2),d=t.n(f),h="/api/persons",b=function(){return d.a.get(h).then((function(e){return e.data}))},p=function(e){return d.a.post(h,e).then((function(e){return e.data}))},E=function(e,n){return d.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},g=function(e,n){var t=d.a.delete("".concat(h,"/").concat(e),n);return console.log("What is returned from deleteListing",t.then((function(e){return e.data}))),t.then((function(e){return e.data}))},v=function(e){var n=e.message;return n?r.a.createElement("div",{className:"notification"},n):null},j=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)({name:"",number:""}),f=Object(i.a)(u,2),d=f[0],h=f[1],j=Object(a.useState)(""),k=Object(i.a)(j,2),y=k[0],O=k[1],w=Object(a.useState)([]),C=Object(i.a)(w,2),S=C[0],N=C[1];Object(a.useEffect)((function(){b().then((function(e){o(e)}))}),[]);var P=function(e){return function(n){h(Object(l.a)({},d,Object(c.a)({},e,n.target.value)))}},D=function(){var e=t.filter((function(e){e.name.includes(y)}));return void 0!==y&&""!==y&&(console.log("These are the search results: ",e),0===e.length?r.a.createElement("p",null,"No matching names were found!"):(console.log("People: ",t),e.map((function(e){return r.a.createElement(m,{key:e.name,content:e})}))))},x=function(){return S?S.map((function(e){return r.a.createElement(v,{message:e})})):null};return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement(x,null)),r.a.createElement("h2",null,"Search"),r.a.createElement("div",null,r.a.createElement("form",null,"field: ",r.a.createElement("input",{value:y,onChange:function(e){return O(e.target.value)}})),r.a.createElement("h3",null,"Matching Results:"),r.a.createElement("ul",null,r.a.createElement(D,null))),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(s,{name:d.name,number:d.number,nameChange:P("name"),numberChange:P("number"),submitFunction:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===d.name})),a={name:"",number:""};if(console.log("Result: ",n),1===n.length){var r={name:n[0].name,number:d.number,id:n[0].id};window.confirm("".concat(d.name," has already been added to the phonebook, would you like to replace their existing number?"))&&E(r.id,r).then((function(e){o(t.map((function(n){return n.id!==e.id?n:e}))),N(S.concat("".concat(e.name,"'s information has been updated!"))),h(a),console.log("Value of returnedPersonInfo: ",e)})).catch((function(e){alert("".concat(r.name," has already been removed from the server")),o(t.filter((function(e){return e.id!==n[0].id}))),h(a)}))}if(0===n.length){e.preventDefault();var u={name:d.name,number:d.number};p(u).then((function(e){var n={name:e.name,number:e.number};o(t.concat(n)),h(a),N(S.concat("".concat(e.name,"'s information has been added to the phonebook!")))})).catch((function(e){var n=Object.keys(e.response.data.errors).map((function(n){return e.response.data.errors[n].message}));console.log("Keys in errors object",Object.keys(e.response.data.errors)),console.log("Array of Notifications: ",n),console.log("Pure Error: ",e.response.data),N(S.concat(n))}))}}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(m,{key:e.id,content:e,deletion:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Are you sure you want to delete ".concat(n.name," from the phonebook?"))&&g(e,n).then((function(){o(t.filter((function(e){return e.id!==n.id})))})).catch((function(e){N(S.concat("The listing of ".concat(n.name," has already been deleted from the server"))),o(t.filter((function(e){return e.id!==n.id})))}))}(e.id)}})}))))};t(38);u.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.4cb8ec0b.chunk.js.map